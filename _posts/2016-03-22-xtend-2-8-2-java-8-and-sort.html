---
layout: post
title: Xtend 2.8.2, Java 8 and .sort()
date: 2016-03-22 07:23:14.000000000 +10:30
type: post
published: true
status: publish
categories:
- Software Development
tags: []
meta:
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _publicize_job_id: '21004232023'
author: Tom Saleeba
---
<h1>Background</h1>
<p>Warning: this post could probably be countered with a simple RTFM! But for those who are Googling for this, I hope it helps.</p>
<p>Today I tested out how our Xtend 2.8 code that works in Java 7 would go in a Java 8 JDK. For the most part it was ok but one problem that we experienced was related to sorting collections.</p>
<p>We had code like:</p>
<pre>val someCustomerComparator = ... // a java.util.Comparator
for(item : someEObject.items.sort(someCustomComparator)) {
  // do stuff
}
</pre>
<p>The sort method here is:</p>
<pre>&lt;T&gt; List&lt;T&gt; org.eclipse.xtext.xbase.lib.IterableExtensions.sort(Iterable&lt;T&gt; iterable, Comparator&lt;? super T&gt;
comparator)
</pre>
<p>It's deprecated in Xtext/Xtend 2.8.2 but it still works with JDK7 but once I tried to compile with JDK8, the sort method call was failing to compile with the message:</p>
<blockquote><p>Type mismatch: cannot convert from void to Iterable&lt;? <span class="code-keyword">extends</span> SomeValueItem&gt; | SomeValueItem[] (at SomeProcessor:192)</p></blockquote>
<p>Sure enough, when you look at what the method is calling, it's changed from the IterableExtensions one to: <span style="font-family:monospace;">void java.util.List.sort(Comparator&lt;? super E&gt; c)</span></p>
<h1>The Fix</h1>
<p>As the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.8/org/eclipse/xtext/xbase/lib/IterableExtensions.html#sort(java.lang.Iterable, java.util.Comparator)">javadoc</a> for the deprecated IterableExtensions.sort() tells us, we should use <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.8/org/eclipse/xtext/xbase/lib/IterableExtensions.html#sortWith(java.lang.Iterable, java.util.Comparator)">sortWith()</a> instead.</p>
<p>Updating the code is as easy as <span style="font-family:monospace;">.sort() =&gt; .sortWith()</span>.</p>
