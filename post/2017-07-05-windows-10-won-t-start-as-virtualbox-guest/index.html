<!DOCTYPE html>

<html lang="en-us">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>TechoTom</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="http://blog.techotom.com/css/main.min.03322cbe6bddfc28e7b17b84bc5446282a510b14b57be3371ba1f68ef1ab9ce8.css"/>

    
    
    

    
    
 
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-101335262-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>
    <body>
        
<nav>
  <header>
    <div class="site-title">
        <a href="/">TechoTom</a>
    </div>  
</header>
  <div class="nav-menu">
  
  <a class="color-link nav-link" href="http://blog.techotom.com/index.xml" target="_blank" rel="noopener" type="application/rss+xml">RSS</a>
</div>
<footer class="footer">
	<div class="social-icons">
        

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    

    
    
    

    

    

    

    

</div>




	<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
	<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>

	<script src="http://blog.techotom.com/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>
</nav>
        <div id="content" class="content-container">
        
<h1 class="post-title">Windows 10 won&#39;t start as VirtualBox guest</h1>
    
    <time>July 5, 2017</time>
    
    <div>
        <p>
        <h1 id="tldr">TL;DR</h1>
<p>Update VirtualBox to at least VirtualBox version <code>5.1.22</code> using whatever method
you prefer, but I describe using the VirtualBox APT repository here.</p>
<h1 id="background">Background</h1>
<p>I&rsquo;ve installed a real/full version of Windows 10 into VirtualBox. I mean real as
opposed to the IE/Edge tester VM images that you can download. I started out
with the following versions:</p>
<pre><code>Windows 10:
  version: 1511
  build: 10586
VirtualBox: 5.0.32
Linux Mint: 18.1 x64
</code></pre>
<p>I was trying to upgrade to:</p>
<pre><code>Windows 10:
  version: 1703
  build: 15063
</code></pre>
<p>This was the latest VirtualBox from the APT repository at the time of writing
and the version of Windows is what you get when you install from the ISO.</p>
<h1 id="the-problem">The problem</h1>
<p>Everthing was working fine after the initial install but when I tried to use the
Upgrade Assistant in Windows, the machine wouldn&rsquo;t boot after the mandatory
restart. It would hang at the black screen with the cyan Windows logo (and no
loading spinner):</p>
<figure>
    <img src="win10-loading.png"/> 
</figure>

<p>Once the VM would get to that stage, one CPU would go to 100% usage (it had 4
CPU cores allocated) and it would sit like that until I gave up waiting for it.
I even left it overnight just to check.</p>
<h1 id="the-solution">The solution</h1>
<p>Using my Google-fu I couldn&rsquo;t find anyone else with the exact same problem. I
did find someone who had the same behaviour but on the IE tester images
<a href="">https://superuser.com/questions/1224949/windows-10-guest-os-stuck-booting-in-virtualbox-on-ubuntu-16-04-host/1225433</a>,
which is close enough, but there was no solution posted.</p>
<p>Next step, I tried the &ldquo;make sure everything is up to date&rdquo; approach. For me
this meant adding the VirtualBox APT repository so I could get the newest
version (newer than what the Ubuntu APT repository hosts).</p>
<p>I followed the instructions for Debian systems from <a href="">https://www.virtualbox.org/wiki/Linux_Downloads#Debian-basedLinuxdistributions</a>:</p>
<blockquote>
<p>Add the following line to your /etc/apt/sources.list:</p>
<pre><code>deb http://download.virtualbox.org/virtualbox/debian yakkety contrib
</code></pre>
<p>According to your distribution, replace &lsquo;yakkety&rsquo; by &lsquo;xenial&rsquo;, &lsquo;vivid&rsquo;, &lsquo;utopic&rsquo;, &lsquo;trusty&rsquo;, &lsquo;raring&rsquo;, &lsquo;quantal&rsquo;, &lsquo;precise&rsquo;, &lsquo;lucid&rsquo;, &lsquo;jessie&rsquo;, &lsquo;wheezy&rsquo;, or &lsquo;squeeze&rsquo;. &hellip; The Oracle public key for apt-secure can be downloaded&hellip;and register[ed]:</p>
<pre><code>wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -
wget -q https://www.virtualbox.org/download/oracle_vbox.asc -O- | sudo apt-key add -
</code></pre>
<p>&hellip;snip&hellip;</p>
<p>To install VirtualBox, do</p>
<pre><code>sudo apt-get update
sudo apt-get install virtualbox-5.1
</code></pre>
<p>&hellip;snip&hellip;</p>
<p>Note: Ubuntu/Debian users might want to install the dkms package&hellip;through the following command:</p>
<pre><code>sudo apt-get install dkms
</code></pre>
</blockquote>
<p>This took me to VirtualBox <code>5.1.22</code>. I then tried to upgrade in Windows and it
worked flawlessly. After the mandatory restart the white loading spinner came up
almost immediately and from then it all worked as it should.</p>

        </p>
    </div>
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "techotom" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    <div class="page-footer">
        
        <hr class="footer-divider">
        
            <a class="tag" href="/tags/windows">#windows</a>
        
            <a class="tag" href="/tags/virtualbox">#virtualbox</a>
        
      
    </div>


        
        </div>
        <footer class="footer-mobile">
	<div class="social-icons">
        

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    

    
    
    

    

    

    

    

</div>




	<div class="footer-mobile-links">
		<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
		<span class="divider-bar">|</span>
		<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>
	</div>

	<script src="http://blog.techotom.com/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>
    </body>
</html>